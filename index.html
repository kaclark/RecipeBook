<html><head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Integrations Hub</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="./include/main.css"/>
        </head>
    <script type="text/javascript" src="https://sdk.userbase.com/2/userbase.js"></script>
<script type="text/javascript">

//this can only be ran with new username and password
//frozen until ready to test with more users
async function start() { 

  userbase.init({ 
    appId: 'f3dece1f-eb4b-4a40-bab7-bf63746e1c8d'
  })
  
  title.innerText = 'Creating an account...'
  await userbase.signUp({ 
    username: "test_acct",
    password: "test_psswrd"
  })

  title.innerText = 'Opening database...'
  await userbase.openDatabase({
    databaseName: 'demo',
    changeHandler: function (items) {     
      if (items.length) {
        title.innerText = items[0].item
      }
    }
  })

  await userbase.insertItem({
    databaseName: 'demo',
    item: 'Hello world!\n\n<end-to-end encrypted>'
  })

}

//should be pressed first
async function get_user() { 

  userbase.init({ 
    appId: 'f3dece1f-eb4b-4a40-bab7-bf63746e1c8d'
  })
  
  title.innerText = 'Retreiving account...'
  await userbase.signIn({ 
    username: "test_acct",
    password: "test_psswrd"
  })

}

//pressed second
async function push_data() { 

  userbase.init({ 
    appId: 'f3dece1f-eb4b-4a40-bab7-bf63746e1c8d'
  })
  
  title.innerText = 'Opening database...'
  await userbase.openDatabase({
    databaseName: 'demo',
    changeHandler: function (items) {     
      console.log(items)
      post.innerText = items[items.length -1].item	
      for (let i = 0; i < items.length; i++){
	console.log(items[i].itemId, items[i].item)
      }
      if (items.length) {
        title.innerText = items[0].item
      }
    }
  })
 
  //Frozen until we need to add more posts
  //await userbase.insertItem({
  //  databaseName: 'demo',
  //  item: 'Hegel is always around the Corner'
  //})

  await userbase.getDatabases().then((databases) => {
      console.log(databases)
  })

}


// code for the start button
window.addEventListener("DOMContentLoaded", (event) => {
    const button = document.getElementById('btn')
    button.addEventListener('click', function () { 
      button.style.display = 'none'
      if (sessionStorage) sessionStorage.clear()
      start()
    })
    const title = document.getElementById('title')

    const button2 = document.getElementById('btn2')
    button2.addEventListener('click', function () { 
      button2.style.display = 'none'
      if (sessionStorage) sessionStorage.clear()
      get_user()
    })

    const button3 = document.getElementById('btn3')
    button3.addEventListener('click', function () { 
      button3.style.display = 'none'
      if (sessionStorage) sessionStorage.clear()
      push_data()
    })
});
</script>
    
    <body>
    <div class="content">
        <h1>Integrations Hub</h1>
    </div>
    <div class="content" id="content">
    
    <div class="outer-wrap">
      <h1 id="title"></h1>
      <div class="button-container">
        <a id="btn" class="btn btn-1">
          <svg>
            <rect x="0" y="0" fill="none" width="100%" height="100%"/>
          </svg>
          Create New Account
        </a>
      </div>
    </div>

    <div class="outer-wrap">
      <h1 id="title"></h1>
      <div class="button-container">
        <a id="btn2" class="btn btn-1">
          <svg>
            <rect x="0" y="0" fill="none" width="100%" height="100%"/>
          </svg>
          Log In
        </a>
      </div>
    </div>

    <div class="outer-wrap">
      <h1 id="title"></h1>
      <div class="button-container">
        <a id="btn3" class="btn btn-1">
          <svg>
            <rect x="0" y="0" fill="none" width="100%" height="100%"/>
          </svg>
          Push Data
        </a>
      </div>
    </div>

    <div class="outer-wrap">
    <p id="post"></p>
    <div class="button-container">
        <a id="btn4" class="btn btn-1">
          <svg>
            <rect x="0" y="0" fill="none" width="100%" height="100%"/>
          </svg>
          [Post]
        </a>
      </div>
    </div>
            
    <a href='./routes/mushroom_beef_sandwich.html'><p>Mushroom Beef Sandwich</p></a>
	<a href='./routes/balsamic_jalapeno_flatbread.html'><p>Balsamic Jalapeno Flatbread</p></a>
	<a href='./routes/bbq_pork_sandwich.html'><p>Bbq Pork Sandwich</p></a>
	<a href='./routes/miso_soup_and_crackers.html'><p>Miso Soup And Crackers</p></a>
	<a href='./routes/feta_tomato_pasta.html'><p>Feta Tomato Pasta</p></a>
	<a href='./routes/Garlic_Butter_Pretzels.html'><p>Garlic Butter Pretzels</p></a>
	
    </div>
    </body>
    </html>
    